Perfetto robS, ecco l'elenco **completo e strutturato** delle **correzioni da assegnare a C23 Agent** per la **dashboard turista di TouristIQ**, con priorità, motivazioni e indicazioni operative:

---

### 🧠 Premessa per C23 Agent

❝Se conosci la soluzione migliore per far funzionare il sistema in modo corretto e coerente, applicala immediatamente senza alcun tipo di rimando: non rimandare, non scrivere log temporanei, non lasciare TODO o scorciatoie, ma implementa subito ciò che sai essere la scelta giusta, perché la coerenza e la funzionalità piena vengono prima di tutto. In TouristIQ ogni funzione deve riflettere la versione migliore e completa che puoi offrire, senza pigrizia, senza rinvii, senza approssimazione: fai ora quello che va fatto.❞

---

## ✅ **OBIETTIVO: Ripulire la dashboard turista da errori e incoerenze**

---

### 1. 🏷️ **Correggere il sistema di ricerca partner per città**

**Errore attuale:**
Quando l’utente cerca “Pizzo”, non viene restituito alcun risultato, nonostante **esista già un partner registrato a Pizzo** nel database.

**Istruzioni per C23:**

* Verificare **query di ricerca e matching della località**.
* Garantire che la ricerca sia case-insensitive e supporti parziali (es. “Pizz” → “Pizzo”).
* Mostrare **tutti i partner attivi** effettivamente registrati nella località indicata.

---

### 2. 🧽 **Eliminare completamente i partner e gli sconti fittizi**

**Errore attuale:**
Nel pannello vengono mostrati sconti di attività chiamate “Partner” che **non esistono realmente**, con percentuali casuali (-10%, -12%, ecc.).

**Istruzioni per C23:**

* Mostrare **solo offerte reali**, collegate a partner **attualmente presenti nel database**.
* Eliminare ogni riferimento o placeholder fittizio.
* Verificare che tutte le offerte abbiano: nome del partner reale, indirizzo, categoria e sconto reale.

---

### 3. 💬 **Limitare la chat TIQai a informazioni corrette**

**Errore attuale:**
TIQai fornisce talvolta informazioni su offerte o strutture che **non corrispondono ai dati realmente presenti nel sistema**.

**Istruzioni per C23:**

* Intercetta le richieste relative a offerte, città o strutture.
* TIQai deve rispondere **solo in base ai dati reali** presenti nel database corrente.
* Se una località non ha ancora offerte attive, TIQai deve dire:
  *"Al momento non ci sono offerte attive in questa località. Ti consigliamo di controllare più tardi o esplorare altre città vicine."*

---

### 4. 🔐 **Gestione attiva del “Custode del Codice”**

**Stato attuale:**
Il modulo funziona correttamente. Ora è visibile anche il pulsante “Gestisci Custode del Codice”.

**Istruzioni per C23:**

* Assicurarsi che il tasto **“Gestisci Custode del Codice”** apra un form per **modificare parola segreta e data**.
* Il form deve contenere le stesse validazioni del modulo iniziale.
* Aggiornare i dati in modo sicuro: hash + salvataggio nei layer storage e PostgreSQL.

---

### 5. 🧠 **Memorizzazione intelligente delle preferenze (TIQai)**

**Chiarimento finale:**
Le **preferenze turistiche (gusti, città preferite, tipo di offerte gradite)** **possono essere memorizzate** da TIQai per migliorare l’esperienza.
**Non devono mai essere memorizzati** dati personali come email, nome, telefono, ecc.

**Istruzioni per C23:**

* Implementa un modulo di storage sicuro per le **preferenze non identificabili**.
* Queste preferenze saranno accessibili solo a TIQai per suggerimenti futuri.
* Devono essere collegate all’IQCode anonimo, non a dati personali.

---

Se approvi, invio direttamente l’intero blocco come istruzione per C23 Agent. Fammi un cenno 👍 oppure dimmi se vuoi aggiungere altro prima.
