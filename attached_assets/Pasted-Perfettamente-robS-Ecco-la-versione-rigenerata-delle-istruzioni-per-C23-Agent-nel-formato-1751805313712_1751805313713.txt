Perfettamente, robS. Ecco la **versione rigenerata** delle istruzioni per **C23 Agent**, nel formato completo che usavamo allâ€™inizio per istruire lâ€™assistente in modo autoritativo e chirurgico. Include contesto, obiettivi, vincoli e sequenza esatta:

---

## âš™ï¸ ISTRUZIONI FORMALI PER C23 Agent

### Sistema: **Custode del Codice â€“ Pulsante Manuale + Tooltip informativo**

by **robS & Geppo**

---

### â

Se conosci la soluzione migliore per far funzionare il sistema in modo corretto e coerente, **applicala immediatamente senza alcun tipo di rimando**:
non rimandare, non scrivere log temporanei, non lasciare TODO o scorciatoie, ma **implementa subito ciÃ² che sai essere la scelta giusta**.
In TouristIQ **ogni funzione deve riflettere la versione migliore e completa** che puoi offrire, **senza pigrizia, senza rinvii, senza approssimazione**:
**fai ora quello che va fatto.**
â

---

### ğŸ¯ OBIETTIVO

Implementare nella **dashboard turista** unâ€™interfaccia chiara, stabile e riutilizzabile per **attivare il Custode del Codice** anche **dopo il primo login**, senza popup automatici o forzature.

---

### âœ… COSA VA IMPLEMENTATO ORA

#### 1. ğŸ§± POSIZIONE UI

* Inserisci un **blocco visivo** sotto al codice IQ personale giÃ  presente nella dashboard del turista (`tourist-dashboard.tsx`).

#### 2. ğŸ”˜ BOTTONE ATTIVATORE

* Testo bottone: **Attiva il Custode del Codice**
* Al click â†’ **apre un modale** con i seguenti campi:

  * `Parola segreta` (campo testo)
  * `Data di nascita` (campo data)
  * Bottone: **Salva e attiva il custode**

#### 3. â„¹ï¸ TOOLTIP INFORMATIVO

* Inserisci **accanto al bottone** una **iconcina "i" cerchiata**
* Tooltip al passaggio del mouse:

> â€œIl Custode del Codice ti aiuta a recuperare il tuo IQCode se lo dimentichi. Salva ora una parola segreta e una data speciale: saranno usate in sicurezza solo da te.â€

#### 4. ğŸ” COMPORTAMENTO UX

* Il bottone deve essere **sempre visibile**
* Se il custode Ã¨ giÃ  attivo (`hasRecoveryData === true`):

  * mostra: **Custode giÃ  attivato** (bottone disabilitato o sostituito)
* Nessun popup automatico, nessun comportamento invasivo
* Dopo il salvataggio â†’ mostra **notifica conferma**

---

### ğŸ§  BACKEND GIÃ€ DISPONIBILE

* Endpoint POST da usare: `/api/activate-custode`
* Stato da controllare via API: `/api/check-custode-status`

---

### â›”ï¸ COSA NON VA FATTO

* âŒ Non mostrare il popup automaticamente
* âŒ Non modificare altri moduli
* âŒ Non spostare il sistema in una pagina separata

---

### ğŸ“Œ MEMO SICUREZZA

* I dati inviati (parola segreta + data) devono essere **hashati via SHA256** nel backend (giÃ  implementato)
* Niente dati in chiaro nel DB

---

Esegui tutto come da istruzioni. Conferma lâ€™esecuzione **step by step**. Se trovi ambiguitÃ  **fermati e chiedi a robS o Geppo.**

---

Fammi sapere se vuoi che lo converta in `.txt`, `.md` o `.pdf` o se preferisci incollarlo direttamente tu a C23 Agent.
