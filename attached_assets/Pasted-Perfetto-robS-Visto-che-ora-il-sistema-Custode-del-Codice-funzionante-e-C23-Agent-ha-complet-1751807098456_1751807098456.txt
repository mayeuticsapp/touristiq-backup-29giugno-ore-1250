Perfetto robS. Visto che ora **il sistema Custode del Codice Ã¨ funzionante**, e C23 Agent ha completato correttamente la parte nella dashboard, passiamo al **passo 2**:
inserire nella **pagina di login** una **frase chiara** per permettere il **recupero dellâ€™IQCode dimenticato**, **solo se il turista ha attivato il custode**.

---

## ğŸ“œ ISTRUZIONI UFFICIALI PER C23 Agent

### Fase 2 â€“ Collegamento al recupero IQCode nella pagina di login

**by robS & Geppo**

---

### â

Applica immediatamente ciÃ² che sai essere la soluzione migliore.
In TouristIQ ogni funzione deve essere completa, coerente, sicura, usabile.
Non posticipare nulla: **implementa subito ciÃ² che va fatto**, e solo ciÃ² che chiediamo noi.
â

---

### ğŸ¯ OBIETTIVO

Aggiungere nella pagina di login una **frase di supporto** che permetta agli utenti di avviare il **recupero del proprio IQCode**, se hanno giÃ  attivato il â€œCustode del Codiceâ€.

---

### âœ… COSA VA FATTO ORA

#### 1. ğŸ“„ POSIZIONAMENTO

* File: `client/src/pages/login.tsx`
* Sotto il campo di input dove si inserisce lâ€™IQCode, aggiungi questa frase:

```plaintext
Hai dimenticato il tuo IQCode? Tranquillo, Ã¨ tutto sotto controllo.
ğŸ‘‰ Recuperalo con il Custode del Codice.
```

#### 2. ğŸ”— COLLEGAMENTO ATTIVO

* La frase â€œRecuperalo con il Custode del Codiceâ€ deve essere **cliccabile**
* Al click â†’ apri un **modale o form di recupero** (non reindirizzare a un'altra pagina!)

---

### ğŸ§ª FORM RECUPERO NEL LOGIN

Nel modale che si apre, inserisci:

* Campo: `Parola segreta`
* Campo: `Data di nascita`
* Bottone: **Recupera il mio IQCode**

#### Azione al click:

* Esegui una **chiamata POST** allâ€™endpoint:

```
/api/recover-iqcode
```

**Payload:**

```json
{
  "secretWord": "inserita",
  "birthDate": "inserita"
}
```

#### Risposta prevista:

* `200 OK` â†’ mostra messaggio: **â€œIl tuo IQCode Ã¨: TIQ-IT-XXXX-YYYYâ€**
* `404` â†’ mostra errore: **â€œNessun codice trovato con questi datiâ€**
* `409` â†’ mostra errore: **â€œHai giÃ  un codice attivoâ€**

---

### ğŸ§© DETTAGLI TECNICI

* Tutti i campi devono essere validati prima dellâ€™invio
* Disabilita il bottone se i dati non sono completi
* Il recupero deve essere visibile **solo dopo aver cliccato la frase**

---

### ğŸ”’ PRIVACY & SICUREZZA

* Mai mostrare codici se lâ€™utente non ha inserito **dati corretti hashati**
* Nessun dato in chiaro nel database
* Non salvare lo storico delle richieste di recupero

---

### â›”ï¸ COSA NON FARE

* âŒ Non forzare popup automatici
* âŒ Non creare pagine nuove
* âŒ Non mostrare errori tecnici o stacktrace

---

Conferma ogni step a robS o Geppo. Se hai dubbi, **fermati e chiedi**.

---

Fammi sapere se vuoi che lo esporti come `.md` o `.pdf`, oppure se lo incolli tu direttamente a C23 Agent.
